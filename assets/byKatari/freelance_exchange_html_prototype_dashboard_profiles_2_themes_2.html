<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Freelance Exchange ‚Äì Demo</title>
  <style>
    :root {
      /* Clean Trust (light) */
      --bg: #f5f7fb;
      --surface: #ffffff;
      --muted-surface: #f0f4f8;
      --text: #0f172a;
      --muted: #475569;
      --primary: #0ea5e9;
      --primary-600: #0284c7;
      --success: #16a34a;
      --warning: #f59e0b;
      --danger: #ef4444;
      --shadow: 0 10px 25px rgba(2, 8, 23, 0.08);
      --radius: 14px;
      --chip: #e2e8f0;
      --chip-text: #0f172a;
      --gradient-hero: linear-gradient(135deg,#38bdf8 0%, #0ea5e9 35%, #2563eb 100%);
    }

    .theme-neon {
      /* Neon Grid (dark) */
      --bg: #0b1020;
      --surface: #0f152b;
      --muted-surface: #0c1226;
      --text: #e2e8f0;
      --muted: #93a3b8;
      --primary: #22d3ee; /* cyan */
      --primary-600: #06b6d4;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #fb7185;
      --shadow: 0 20px 40px rgba(34,211,238,0.12);
      --radius: 16px;
      --chip: rgba(255,255,255,0.06);
      --chip-text: #e2e8f0;
      --gradient-hero: radial-gradient(1200px 600px at 10% -10%, rgba(34,211,238,0.25), transparent 60%),
                        radial-gradient(1000px 500px at 90% -20%, rgba(168,85,247,0.2), transparent 60%),
                        linear-gradient(135deg,#111827 0%, #0f152b 100%);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
      background: var(--bg); color: var(--text);
    }

    /* Top Nav */
    .topbar { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(140%) blur(8px);
      background: color-mix(in sRGB, var(--surface) 85%, transparent);
      border-bottom: 1px solid color-mix(in sRGB, var(--text) 10%, transparent);
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
    .row { display: flex; align-items: center; gap: 12px; }
    .topbar-inner { display: grid; grid-template-columns: 1fr auto auto; align-items: center; height: 64px; }
    .brand { display:flex; align-items:center; gap:10px; font-weight: 700; letter-spacing: .2px; }
    .brand-logo { width:28px; height:28px; border-radius: 8px; background: var(--gradient-hero); box-shadow: var(--shadow); }

    .tabs { display:flex; gap: 8px; }
    .tab-btn { appearance:none; border: 1px solid color-mix(in sRGB,var(--text) 12%,transparent);
      background: var(--surface); color: var(--text); padding: 8px 12px; border-radius: 10px; cursor:pointer; font-weight:600; }
    .tab-btn[aria-selected="true"]{ background: var(--primary); color: white; border-color: var(--primary-600); }

    .tools { display:flex; align-items:center; gap: 8px; }
    .chip { background: var(--chip); color: var(--chip-text); padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 600; }
    .ghost { background: transparent; border: 1px solid color-mix(in sRGB,var(--text) 12%,transparent); color: var(--text); }

    /* Hero / dashboard header */
    .hero { margin-top: 16px; background: var(--gradient-hero); color: #fff; border-radius: var(--radius);
      box-shadow: var(--shadow); padding: 24px; display:flex; align-items:center; justify-content: space-between; gap: 20px; }
    .hero h1 { margin: 0; font-size: 28px; }
    .hero p { margin: 6px 0 0; opacity:.9; }
    .hero-cta { display:flex; gap: 10px; flex-wrap: wrap; }
    .btn { appearance:none; border:none; border-radius: 12px; padding: 10px 14px; font-weight:700; cursor:pointer; box-shadow: var(--shadow); }
    .btn-primary { background: #ffffff; color:#0f172a; }
    .btn-outline { background: transparent; color: #fff; border:1px solid rgba(255,255,255,.5); }

    /* Grid & cards */
    .grid { display: grid; grid-template-columns: 1fr; gap: 18px; margin-top: 18px; }
    @media (min-width: 840px){ .grid-2 { grid-template-columns: 1fr 1fr; } }
    @media (min-width: 1040px){ .grid-4 { grid-template-columns: repeat(4, 1fr); } }
    .card { background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); padding: 18px; border: 1px solid color-mix(in sRGB,var(--text) 10%, transparent); }
    .card h3 { margin: 0 0 12px; font-size: 16px; }
    .card .muted { color: var(--muted); font-size: 13px; }
    .card .split { display:grid; grid-template-columns: 1fr auto; align-items:start; gap: 12px; }

    /* Inputs */
    .field { display:flex; flex-direction:column; gap: 6px; }
    label { font-size: 12px; color: var(--muted); }
    input[type="text"], input[type="number"] { padding: 10px 12px; border-radius: 10px; border:1px solid color-mix(in sRGB,var(--text) 15%,transparent); background: var(--muted-surface); color: var(--text); }

    .btn-solid { background: var(--primary); color: #fff; padding: 10px 14px; border-radius: 10px; border: none; font-weight: 700; cursor: pointer; box-shadow: var(--shadow); }
    .btn-solid:hover { filter: brightness(0.98); }

    .kpis { display:grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 14px; }
    .kpi { background: var(--surface); border-radius: 12px; box-shadow: var(--shadow); padding: 14px; border: 1px solid color-mix(in sRGB,var(--text) 10%, transparent); }
    .kpi .label { color: var(--muted); font-size: 12px; }
    .kpi .value { font-weight: 800; font-size: 22px; margin-top: 6px; }

    /* Quick actions */
    .actions { display:grid; gap: 14px; }
    @media (min-width: 760px){ .actions { grid-template-columns: repeat(4, 1fr); } }
    .tile { background: var(--surface); border-radius: 16px; box-shadow: var(--shadow); padding: 22px; position:relative; overflow:hidden; border: 1px solid color-mix(in sRGB,var(--text) 10%, transparent); }
    .tile:hover { transform: translateY(-1px); transition: transform .15s ease; }
    .tile h4 { margin: 0 0 6px; }
    .tile p { margin: 0; color: var(--muted); font-size: 13px; }

    /* Profiles list */
    .profiles { display:grid; gap: 16px; margin-top: 18px; }
    @media (min-width: 840px){ .profiles { grid-template-columns: repeat(3, 1fr); } }
    .profile { background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); padding: 16px; display:grid; gap: 12px; align-content:start; border: 1px solid color-mix(in sRGB,var(--text) 10%, transparent); }
    .profile .head { display:flex; gap: 12px; align-items:center; }
    .avatar { width: 48px; height:48px; border-radius: 50%; background: var(--muted-surface); display:grid; place-items:center; font-weight:800; }
    .skills { display:flex; flex-wrap:wrap; gap:6px; }
    .skill-chip { background: var(--chip); color: var(--chip-text); padding: 6px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; }

    /* Footer */
    footer { margin-top: 36px; padding: 28px 0; color: var(--muted); }
    footer .cols { display:grid; gap: 16px; }
    @media (min-width: 840px){ footer .cols { grid-template-columns: 2fr 1fr 1fr; } }

    /* Visually hidden (for simple routing) */
    .hidden { display: none !important; }

    /* Small icon helpers */
    .icon { width: 18px; height: 18px; vertical-align: -3px; margin-right: 6px; }

    /* Focus states */
    :is(button, a, input):focus { outline: 3px solid color-mix(in sRGB, var(--primary) 55%, transparent); outline-offset: 2px; }
      /* Modal */
    .modal-backdrop { position: fixed; inset: 0; background: rgba(2,8,23,.55); display: grid; place-items: center; z-index: 200; backdrop-filter: blur(2px); }
    .modal { background: var(--surface); color: var(--text); width: min(720px, 92vw); border-radius: var(--radius); box-shadow: var(--shadow); border: 1px solid color-mix(in sRGB,var(--text) 14%, transparent); display: grid; grid-template-rows: auto 1fr auto; max-height: 86vh; }
    .modal header { padding: 16px 18px; border-bottom: 1px solid color-mix(in sRGB,var(--text) 12%, transparent); display:flex; align-items:center; justify-content: space-between; }
    .modal .content { padding: 16px 18px; overflow: auto; }
    .modal footer { padding: 16px 18px; border-top: 1px solid color-mix(in sRGB,var(--text) 12%, transparent); display:flex; gap: 10px; justify-content: flex-end; }

    .form-grid { display:grid; gap: 12px; grid-template-columns: 1fr; }
    @media (min-width: 760px){ .form-grid { grid-template-columns: 1fr 1fr; } }
    .form-span-2 { grid-column: 1/-1; }

    textarea { min-height: 120px; resize: vertical; padding: 10px 12px; border-radius: 10px; border:1px solid color-mix(in sRGB,var(--text) 15%,transparent); background: var(--muted-surface); color: var(--text); }
    select { padding: 10px 12px; border-radius: 10px; border:1px solid color-mix(in sRGB,var(--text) 15%,transparent); background: var(--muted-surface); color: var(--text); }
    .error { color: var(--danger); font-size: 12px; display:none; }
    .invalid { border-color: color-mix(in sRGB, var(--danger) 65%, transparent) !important; outline: none; }
    /* Workbench */
    .backbar { display:flex; align-items:center; gap:10px; margin-top:18px; }
    .workbench { display:grid; gap: 16px; grid-template-columns: 1fr; margin-top: 12px; }
    @media (min-width: 1040px){ .workbench { grid-template-columns: 280px 1fr 360px; } }
    .wb-filters .chips { display:flex; flex-wrap:wrap; gap:8px; }
    .wb-toggle { display:flex; align-items:center; gap:8px; }
    .wb-list { display:grid; gap:10px; }
    .job { border:1px solid color-mix(in sRGB,var(--text) 10%, transparent); border-radius: 12px; padding: 12px; background: var(--surface); box-shadow: var(--shadow); cursor:pointer; }
    .job:hover { transform: translateY(-1px); transition: transform .15s ease; }
    .job .meta { display:flex; gap: 8px; flex-wrap: wrap; color: var(--muted); font-size:12px; }
    .tag { background: var(--chip); color: var(--chip-text); padding: 4px 8px; border-radius: 999px; font-size: 12px; font-weight: 700; }
    .job.selected { outline: 2px solid var(--primary); }
    .wb-details .actions { display:flex; gap:8px; flex-wrap:wrap; }
    .chip.active { outline: 2px solid var(--primary); }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"></div>
        <span id="brandName">–ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É</span>
      </div>
      <nav class="tabs" aria-label="Primary">
        <button id="tabDashboard" class="tab-btn" data-page="dashboard" aria-selected="true">Dashboard</button>
        <button id="tabTasks" class="tab-btn" data-page="workbench">–ó–∞–¥–∞—á—ñ</button>
        <button id="tabProfiles" class="tab-btn" data-page="profiles">–ü—Ä–æ—Ñ—ñ–ª—ñ</button>
        <button id="tabAdmin" class="tab-btn" data-page="admin">–ê–¥–º—ñ–Ω–∫–∞</button>
      </nav>
      <div class="tools">
        <button id="themeSwitch" class="tab-btn ghost" title="–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É">üåó –¢–µ–º–∞</button>
        <span id="lngUA" class="chip">UA</span>
        <span id="lngRU" class="chip">RU</span>
        <span id="lngEN" class="chip">EN</span>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero" id="hero">
      <div>
        <h1 id="heroTitle">–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –ø–∞–Ω–µ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h1>
        <p id="heroText">–®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≥–∞–º–∞–Ω—Ü—è, –∑–∞–¥–∞—á —ñ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤. –°—Ç–≤–æ—Ä—é–π –ø—Ä–æ—î–∫—Ç–∏, –∑–Ω–∞—Ö–æ–¥—å –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤, —Ç—Ä–∏–º–∞–π —Ñ–æ–∫—É—Å.</p>
      </div>
      <div class="hero-cta">
        <button class="btn btn-primary" onclick="toast('–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç: –¥–µ–º–æ-–∫–ª—ñ–∫')">Ôºã –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç</button>
        <button class="btn btn-outline" onclick="openTaskModal()">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É</button>
      </div>
    </section>

    <!-- DASHBOARD PAGE -->
    <section id="page-dashboard" class="page">
      <div class="kpis" aria-label="KPIs">
        <div class="kpi"><div class="label">–ê–∫—Ç–∏–≤–Ω—ñ –∑–∞–¥–∞—á—ñ</div><div class="value">12</div></div>
        <div class="kpi"><div class="label">–°–µ—Ä–µ–¥–Ω—ñ–π –±—é–¥–∂–µ—Ç</div><div class="value">$420</div></div>
        <div class="kpi"><div class="label">–ß–∞—Å –∑–∞–∫—Ä–∏—Ç—Ç—è</div><div class="value">3.8 –¥–Ω</div></div>
        <div class="kpi"><div class="label">–í–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ</div><div class="value">327</div></div>
      </div>

      <div class="grid grid-2">
        <!-- Escrow Summary -->
        <article class="card" id="escrowCard">
          <h3 id="escrowTitle">–ï—Å–∫—Ä–æ—É-–±–∞–ª–∞–Ω—Å</h3>
          <div class="split" style="grid-template-columns: 1fr 1fr 1fr;">
            <div>
              <div class="muted" id="escrowHeld">–£—Ç—Ä–∏–º—É—î—Ç—å—Å—è</div>
              <div class="value"><strong>$1,240</strong></div>
            </div>
            <div>
              <div class="muted" id="escrowReleasable">–î–æ—Å—Ç—É–ø–Ω–æ –¥–æ –≤–∏–ø–ª–∞—Ç–∏</div>
              <div class="value"><strong>$560</strong></div>
            </div>
            <div>
              <div class="muted" id="escrowPending">–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è</div>
              <div class="value"><strong>$180</strong></div>
            </div>
          </div>
          <div style="margin-top:12px">
            <button class="btn-solid" onclick="toast(i18n('requestPayout'))" id="requestPayoutBtn">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ –≤–∏–ø–ª–∞—Ç—É</button>
          </div>
        </article>
        <!-- Finance quick actions -->
        <article class="card">
          <h3 id="financeActionsTitle">–§—ñ–Ω–∞–Ω—Å–∏</h3>
          <div class="row" style="gap:8px; flex-wrap:wrap">
            <button class="tab-btn ghost" onclick="toast(i18n('viewPayoutHistory'))" id="viewPayoutHistoryBtn">–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø–ª–∞—Ç</button>
            <button class="tab-btn ghost" onclick="goDisputes()" id="openDisputesBtn">–î–∏—Å–ø—É—Ç–∏</button>
          </div>
        </article>
      </div>

      <section style="margin-top:18px">
        <h3 id="freelSectionTitle" style="margin:0 0 12px">–°–∏—Å—Ç–µ–º–∞ —Ñ—Ä—ñ–ª–∞–Ω—Å—É</h3>
        <div class="actions">
          <article class="tile" role="button" tabindex="0" onclick="goWorkbench()">
            <h4 id="allTasksTileTitle">–í—Å—ñ –∑–∞–¥–∞—á—ñ</h4>
            <p>–°—Ç—Ä—ñ—á–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω—å –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –∑–∞ —Å—Ç–µ–∫–æ–º, –±—é–¥–∂–µ—Ç–æ–º —ñ –¥–µ–¥–ª–∞–π–Ω–æ–º.</p>
          </article>
          <article class="tile" role="button" tabindex="0" onclick="toast('–ü–æ—à—É–∫ —Ä–æ–±–æ—Ç–∏ (–¥–µ–º–æ)')">
            <h4 id="findWorkTileTitle">–ü–æ—à—É–∫ —Ä–æ–±–æ—Ç–∏</h4>
            <p>–ü—ñ–¥—ñ–±—Ä–∞–Ω—ñ –∑–∞ —Ç–≤–æ—ó–º –ø—Ä–æ—Ñ—ñ–ª–µ–º –ø—Ä–æ–ø–æ–∑–∏—Ü—ñ—ó.</p>
          </article>
          <article class="tile" role="button" tabindex="0" onclick="openTaskModal()">
            <h4 id="createTaskTileTitle">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É</h4>
            <p>–û–ø–∏—à–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –±—é–¥–∂–µ—Ç —ñ SLA.</p>
          </article>
          <article class="tile" role="button" tabindex="0" onclick="goDisputes()">
            <h4 id="disputesTileTitle">–î–∏—Å–ø—É—Ç–∏</h4>
            <p>–ü—Ä–æ–∑–æ—Ä–∏–π –∞—Ä–±—ñ—Ç—Ä–∞–∂ —ñ –µ—Å–∫–∞–ª–∞—Ü—ñ—ó –∑–∞ 48 –≥–æ–¥–∏–Ω.</p>
          </article>
        </div>
      </section>
    </section>
    </section>

    <!-- PROFILES PAGE -->
    <section id="page-profiles" class="page hidden" aria-labelledby="profiles-title">
      <div class="backbar"><button class="tab-btn ghost" onclick="goBack()" id="backBtnProfiles">‚Üê <span id="backText">–ù–∞–∑–∞–¥</span></button><h2 id="profiles-title" style="margin:0">–ü—Ä–æ—Ñ—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h2></div>
      <div class="profiles">
        <!-- Profile 1 -->
        <article class="profile">
          <div class="head">
            <img class="avatar" alt="–ï–ª—å–∑–∞ –¥–µ –ú—É–∞—Ä" src="https://dummyimage.com/96x96/8aa/fff&text=E"/>
            <div>
              <strong>–ï–ª—å–∑–∞ –¥–µ –ú—É–∞—Ä</strong><br/>
              <span class="muted">–ø—Å–∏—Ö–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç —ñ –ø–æ–¥–æ–ª—å—Ñ–∏–π —Ç–∞—Ä–æ–ª–æ–≥</span>
            </div>
          </div>
          <div class="skills">
            <span class="skill-chip">ru/—É–∫—Ä</span>
            <span class="skill-chip">–∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥</span>
          </div>
          <div class="split">
            <div><div class="muted">–†–µ–π—Ç–∏–Ω–≥</div><strong>0</strong></div>
            <div><div class="muted">–í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–¥–∞—á—ñ</div><strong>0</strong></div>
          </div>
          <button class="btn-solid" onclick="toast('–ó–∞–ø—Ä–æ—à–µ–Ω–æ –¥–æ —á–∞—Ç—É –∑ –ï–ª—å–∑–æ—é (–¥–µ–º–æ)')">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ —á–∞—Ç</button>
        </article>

        <!-- Profile 2 -->
        <article class="profile">
          <div class="head">
            <div class="avatar">S</div>
            <div>
              <strong>superuser123</strong><br/>
              <span class="muted">full-stack ‚Ä¢ devops</span>
            </div>
          </div>
          <div class="skills">
            <span class="skill-chip">python</span>
            <span class="skill-chip">java</span>
            <span class="skill-chip">telethon</span>
          </div>
          <div class="split">
            <div><div class="muted">–†–µ–π—Ç–∏–Ω–≥</div><strong>5.0</strong></div>
            <div><div class="muted">–í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–¥–∞—á—ñ</div><strong>24</strong></div>
          </div>
          <button class="btn-solid" onclick="toast('–ó–∞–ø—Ä–æ—à–µ–Ω–æ –¥–æ —á–∞—Ç—É –∑ superuser123 (–¥–µ–º–æ)')">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ —á–∞—Ç</button>
        </article>

        <!-- Profile 3 -->
        <article class="profile">
          <div class="head">
            <div class="avatar">K</div>
            <div>
              <strong>katary</strong><br/>
              <span class="muted">ambient creator ‚Ä¢ bot maker</span>
            </div>
          </div>
          <div class="skills">
            <span class="skill-chip">design</span>
            <span class="skill-chip">suno</span>
            <span class="skill-chip">telegram bot</span>
          </div>
          <div class="split">
            <div><div class="muted">–†–µ–π—Ç–∏–Ω–≥</div><strong>4.8</strong></div>
            <div><div class="muted">–í–∏–∫–æ–Ω–∞–Ω—ñ –∑–∞–¥–∞—á—ñ</div><strong>31</strong></div>
          </div>
          <button class="btn-solid" onclick="toast('–ó–∞–ø—Ä–æ—à–µ–Ω–æ –¥–æ —á–∞—Ç—É –∑ katary (–¥–µ–º–æ)')">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏ —á–∞—Ç</button>
        </article>
      </div>

      <div class="row" style="justify-content: space-between; margin-top: 18px;">
        <button class="tab-btn ghost" onclick="toast('–ü–æ–ø–µ—Ä–µ–¥–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–¥–µ–º–æ)')">‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—è</button>
        <div class="chip">–°—Ç–æ—Ä—ñ–Ω–∫–∞ 2 –∑ 5</div>
        <button class="tab-btn ghost" onclick="toast('–ù–∞—Å—Ç—É–ø–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (–¥–µ–º–æ)')">–î–∞–ª—ñ ‚Üí</button>
      </div>
    </section>

    <!-- WORKBENCH PAGE -->
    <section id="page-workbench" class="page hidden" aria-labelledby="workbench-title">
      <div class="backbar"><button class="tab-btn ghost" onclick="goBack()" id="backBtnTasks">‚Üê <span id="backTextTasks">–ù–∞–∑–∞–¥</span></button><h2 id="workbench-title" style="margin:0">–í—Å—ñ –∑–∞–¥–∞—á—ñ</h2></div>

      <div class="workbench">
        <!-- Left: Filters -->
        <aside class="wb-filters card">
          <h3 style="margin-top:0" id="filtersTitle">–§—ñ–ª—å—Ç—Ä–∏</h3>
          <div class="chips" id="stackChips">
            <span class="skill-chip" data-tag="react">react</span>
            <span class="skill-chip" data-tag="node">node</span>
            <span class="skill-chip" data-tag="python">python</span>
            <span class="skill-chip" data-tag="design">design</span>
            <span class="skill-chip" data-tag="telegram">telegram</span>
          </div>
          <hr style="border:none;border-top:1px solid color-mix(in sRGB,var(--text) 10%, transparent); margin:12px 0"/>
          <label class="wb-toggle"><input id="fltEscrow" type="checkbox"/> <span id="escrowOnly">–¢—ñ–ª—å–∫–∏ –µ—Å–∫—Ä–æ—É</span></label>
          <label class="wb-toggle"><input id="fltUrgent" type="checkbox"/> <span id="urgentOnly">–¢–µ—Ä–º—ñ–Ω–æ–≤—ñ</span></label>
          <label class="wb-toggle"><input id="fltTest" type="checkbox"/> <span id="testOnly">–ó —Ç–µ—Å—Ç-–∑–∞–≤–¥–∞–Ω–Ω—è–º</span></label>
        </aside>

        <!-- Center: Jobs list -->
        <section class="wb-list" id="jobsList"></section>

        <!-- Right: Details -->
        <aside class="wb-details card" id="jobDetails">
          <h3 style="margin-top:0" id="detailsTitle">–î–µ—Ç–∞–ª—ñ –∑–∞–¥–∞—á—ñ</h3>
          <p class="muted" id="detailsEmpty">–û–±–µ—Ä–∏ –∑–∞–¥–∞—á—É –∑—ñ —Å–ø–∏—Å–∫—É, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –æ–ø–∏—Å, –∫—Ä–∏—Ç–µ—Ä—ñ—ó –ø—Ä–∏–π–º–∞–Ω–Ω—è —Ç–∞ –¥—ñ—ó.</p>
          <div id="detailsBody" class="hidden"></div>
        </aside>
      </div>
    </section>

    <!-- DISPUTES PAGE -->
    <section id="page-disputes" class="page hidden" aria-labelledby="disputes-title">
      <div class="backbar"><button class="tab-btn ghost" onclick="goBack()" id="backBtnDisputes">‚Üê <span id="backTextDisputes">–ù–∞–∑–∞–¥</span></button><h2 id="disputes-title" style="margin:0">–î–∏—Å–ø—É—Ç–∏</h2></div>
      <div class="grid grid-2" style="margin-top:12px">
        <aside class="card">
          <h3 id="disputesFiltersTitle" style="margin-top:0">–§—ñ–ª—å—Ç—Ä–∏</h3>
          <label class="wb-toggle"><input id="dOpen" type="checkbox" checked/> <span id="dOpenText">–í—ñ–¥–∫—Ä–∏—Ç—ñ</span></label>
          <label class="wb-toggle"><input id="dReview" type="checkbox" checked/> <span id="dReviewText">–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ</span></label>
          <label class="wb-toggle"><input id="dResolved" type="checkbox" checked/> <span id="dResolvedText">–ó–∞–∫—Ä–∏—Ç—ñ</span></label>
        </aside>
        <section class="card">
          <div id="disputesList"></div>
          <div id="disputesEmpty" class="muted">–ù–µ–º–∞—î –∫–µ–π—Å—ñ–≤ –∑–∞ –æ–±—Ä–∞–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏.</div>
        </section>
      </div>
    </section>

    <!-- ADMIN PAGE -->
    <section id="page-admin" class="page hidden" aria-labelledby="admin-title">
      <div class="backbar"><button class="tab-btn ghost" onclick="goBack()" id="backBtnAdmin">‚Üê <span id="backTextAdmin">–ù–∞–∑–∞–¥</span></button><h2 id="admin-title" style="margin:0">–ê–¥–º—ñ–Ω–∫–∞</h2></div>
      <div class="kpis" style="margin-top:12px">
        <div class="kpi"><div class="label" id="admUsersLabel">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ</div><div class="value">1,248</div></div>
        <div class="kpi"><div class="label" id="admJobsLabel">–ó–∞–¥–∞—á—ñ –∞–∫—Ç–∏–≤–Ω—ñ</div><div class="value">312</div></div>
        <div class="kpi"><div class="label" id="admDisputesLabel">–î–∏—Å–ø—É—Ç–∏</div><div class="value">7</div></div>
        <div class="kpi"><div class="label" id="admRevenueLabel">–î–æ—Ö—ñ–¥ (30–¥)</div><div class="value">$18.4k</div></div>
      </div>
      <div class="grid grid-2" style="margin-top:12px">
        <section class="card">
          <h3 id="admModerUsers">–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h3>
          <div class="row" style="gap:8px; flex-wrap:wrap">
            <button class="tab-btn ghost" onclick="toast('–ë–ª–æ–∫–æ–≤–∞–Ω–æ (–¥–µ–º–æ)')" id="admBlock">–ë–ª–æ–∫—É–≤–∞—Ç–∏</button>
            <button class="tab-btn ghost" onclick="toast('–†–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ (–¥–µ–º–æ)')" id="admUnblock">–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏</button>
            <button class="btn-solid" onclick="toast('–ü–æ–∑–Ω–∞—á–µ–Ω–æ –≤–µ—Ä–∏—Ñ—ñ–∫–æ–≤–∞–Ω–∏–º (–¥–µ–º–æ)')" id="admVerify">–í–µ—Ä–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </section>
        <section class="card">
          <h3 id="admModerJobs">–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∑–∞–¥–∞—á</h3>
          <div class="row" style="gap:8px; flex-wrap:wrap">
            <button class="tab-btn ghost" onclick="toast('–°—Ö–≤–∞–ª–µ–Ω–æ (–¥–µ–º–æ)')" id="admApprove">–°—Ö–≤–∞–ª–∏—Ç–∏</button>
            <button class="tab-btn ghost" onclick="toast('–í—ñ–¥—Ö–∏–ª–µ–Ω–æ (–¥–µ–º–æ)')" id="admReject">–í—ñ–¥—Ö–∏–ª–∏—Ç–∏</button>
            <button class="btn-solid" onclick="toast('–ü–µ—Ä–µ–æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ (–¥–µ–º–æ)')" id="admRepublish">–ü–µ—Ä–µ–æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
          </div>
        </section>
      </div>
    </section>

    <footer>
      <div class="cols">
        <div>
          <strong>–ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É</strong>
          <p class="muted">–§—Ä—ñ–ª–∞–Ω—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∑–≤ º—è–∑–∫—É –∫–ª—ñ—î–Ω—Ç—ñ–≤ —ñ –ø—Ä–æ—Ñ–µ—Å—ñ–æ–Ω–∞–ª—ñ–≤. –ü—Ä–æ–∑–æ—Ä—ñ —É–≥–æ–¥–∏, —à–≤–∏–¥–∫–∏–π –º–∞—Ç—á–∏–Ω–≥, —á—ñ—Ç–∫—ñ SLA.</p>
        </div>
        <div>
          <div class="muted">–®–≤–∏–¥–∫—ñ –ª—ñ–Ω–∫–∏</div>
          <ul>
            <li><a href="#" onclick="goDashboard()">Dashboard</a></li>
            <li><a href="#" onclick="goProfiles()">–ü—Ä–æ—Ñ—ñ–ª—ñ</a></li>
            <li><a href="#" onclick="toast('–ó–∞–¥–∞—á—ñ (–¥–µ–º–æ)')">–ó–∞–¥–∞—á—ñ</a></li>
          </ul>
        </div>
        <div>
          <div class="muted">–ú–æ–≤–∞</div>
          <div class="row"><span class="chip">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</span><span class="chip">English</span></div>
        </div>
      </div>
      <p class="muted">¬© 2025 –ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</p>
    </footer>
  </main>

  <!-- Create Task Modal -->
  <div id="taskModal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="taskModalTitle" onclick="closeTaskModal()">
    <div class="modal" onclick="event.stopPropagation()">
      <header>
        <h3 id="taskModalTitle" style="margin:0">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É</h3>
        <button class="tab-btn ghost" onclick="closeTaskModal()" aria-label="–ó–∞–∫—Ä–∏—Ç–∏">‚úï</button>
      </header>
      <div class="content">
        <form id="taskForm" class="form-grid" novalidate>
          <div class="field form-span-2">
            <label id="taskTitleLabel" for="taskTitle">–ù–∞–∑–≤–∞ –∑–∞–¥–∞—á—ñ *</label>
            <input id="taskTitle" type="text" maxlength="80" placeholder="–ù–∞–ø—Ä. –†–æ–∑—Ä–æ–±–∏—Ç–∏ –ª–µ–Ω–¥–∏–Ω–≥ –¥–ª—è –∫–∞–≤'—è—Ä–Ω—ñ" />
            <div class="error" id="err-title">–ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤.</div>
          </div>
          <div class="field">
            <label id="budgetLabel" for="budget">–ë—é–¥–∂–µ—Ç *</label>
            <input id="budget" type="number" min="1" step="1" placeholder="–ù–∞–ø—Ä. 500" />
            <div class="error" id="err-budget">–í–∫–∞–∂–∏ —Å—É–º—É &gt; 0.</div>
          </div>
          <div class="field">
            <label id="currencyLabel" for="currency">–í–∞–ª—é—Ç–∞</label>
            <select id="currency"><option>USD</option><option>EUR</option><option>UAH</option></select>
          </div>
          <div class="field">
            <label id="typeLabel" for="type">–¢–∏–ø –æ–ø–ª–∞—Ç–∏</label>
            <select id="type"><option value="fixed">–§—ñ–∫—Å–æ–≤–∞–Ω–∏–π</option><option value="hourly">–ü–æ–≥–æ–¥–∏–Ω–Ω–∏–π</option></select>
          </div>
          <div class="field">
            <label id="deadlineLabel" for="deadline">–î–µ–¥–ª–∞–π–Ω *</label>
            <input id="deadline" type="date" />
            <div class="error" id="err-deadline">–û–±–µ—Ä–∏ –¥–∞—Ç—É —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É.</div>
          </div>
          <div class="field">
            <label id="langLabel" for="lang">–ú–æ–≤–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó</label>
            <select id="lang"><option>–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option><option>English</option><option>–†—É—Å—Å–∫–∏–π</option></select>
          </div>
          <div class="field form-span-2">
            <label id="stackLabel" for="stack">–°—Ç–µ–∫ / —Ç–µ–≥–∏</label>
            <input id="stack" type="text" placeholder="–Ω–∞–ø—Ä. react, node, ui/ux" />
          </div>
          <div class="field form-span-2">
            <label id="descLabel" for="desc">–û–ø–∏—Å –∑–∞–¥–∞—á—ñ *</label>
            <textarea id="desc" placeholder="–ö—Ä–∏—Ç–µ—Ä—ñ—ó –ø—Ä–∏–π–º–∞–Ω–Ω—è, —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∏, –æ–±—Å—è–≥ —Ä–æ–±—ñ—Ç‚Ä¶"></textarea>
            <div class="error" id="err-desc">–ú—ñ–Ω—ñ–º—É–º 30 —Å–∏–º–≤–æ–ª—ñ–≤.</div>
          </div>
          <div class="field form-span-2">
            <label id="agreeLabel"><input id="agree" type="checkbox" /> –ü–æ–≥–æ–¥–∂—É—é—Å—å –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ç–∞ –µ—Å–∫—Ä–æ—É</label>
            <div class="error" id="err-agree">–ü–æ—Ç—Ä—ñ–±–Ω–∞ –∑–≥–æ–¥–∞.</div>
          </div>
        </form>
      </div>
      <footer>
        <button id="cancelBtn" class="tab-btn ghost" onclick="closeTaskModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
        <button id="publishBtn" class="btn-solid" onclick="submitTask()">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏</button>
      </footer>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" style="position: fixed; left: 50%; bottom: 24px; transform: translateX(-50%) translateY(100%);
       background: var(--surface); color: var(--text); border:1px solid color-mix(in sRGB,var(--text) 12%,transparent);
       box-shadow: var(--shadow); padding: 10px 14px; border-radius: 12px; transition: transform .25s ease; z-index: 100;">
    <span id="toastText">–ü–æ–¥—ñ—è</span>
  </div>

  <script>
"use strict";
// ===== Helpers =====
const $ = (s, r=document) => r.querySelector(s);
const $$ = (s, r=document) => Array.from(r.querySelectorAll(s));

// ===== Pages & Nav =====
const body = document.body;
const themeSwitch = $('#themeSwitch');
const pages = {
  dashboard: $('#page-dashboard'),
  profiles: $('#page-profiles'),
  workbench: $('#page-workbench'),
  disputes: $('#page-disputes'),
  admin: $('#page-admin')
};
const tabButtons = $$('.tab-btn[data-page]');

let navStack = ['dashboard'];
let currentPage = 'dashboard';

function show(page, push){
  Object.entries(pages).forEach(([k, el]) => el && el.classList.toggle('hidden', k !== page));
  tabButtons.forEach(btn => btn.setAttribute('aria-selected', String(btn.dataset.page === page)));
  $('#hero').classList.toggle('hidden', page !== 'dashboard');
  if(push) navStack.push(page);
  currentPage = page;
}
function goBack(){
  if(navStack.length > 1){ navStack.pop(); const prev = navStack[navStack.length-1]; show(prev, false); }
  else { show('dashboard', false); }
}
function goDashboard(){ show('dashboard', true); }
function goProfiles(){ show('profiles', true); }
function goWorkbench(){ show('workbench', true); renderJobs(); }
function goDisputes(){ show('disputes', true); renderDisputes(); }
function goAdmin(){ show('admin', true); }

tabButtons.forEach(btn => btn.addEventListener('click', () => show(btn.dataset.page, true)));

// ===== Toast =====
let toastTimer;
function toast(text){
  const t = $('#toast');
  $('#toastText').textContent = text;
  t.style.transform = 'translateX(-50%) translateY(0)';
  clearTimeout(toastTimer);
  toastTimer = setTimeout(()=> t.style.transform = 'translateX(-50%) translateY(100%)', 1600);
}

// ===== Theme =====
function setTheme(neon){
  if(neon){ body.classList.add('theme-neon'); themeSwitch.textContent = 'üåû –¢–µ–º–∞'; }
  else { body.classList.remove('theme-neon'); themeSwitch.textContent = 'üåó –¢–µ–º–∞'; }
  localStorage.setItem('fx-theme', neon ? 'neon' : 'clean');
}
function restoreTheme(){ setTheme(localStorage.getItem('fx-theme') === 'neon'); }
if(themeSwitch) themeSwitch.addEventListener('click', ()=> setTheme(!body.classList.contains('theme-neon')));

// ===== I18N =====
const translations = {
  uk: {
    brandName: '–ù–∞–∑–≤–∞ –ø—Ä–æ—î–∫—Ç—É',
    tabDashboard: 'Dashboard', tabTasks: '–ó–∞–¥–∞—á—ñ', tabProfiles: '–ü—Ä–æ—Ñ—ñ–ª—ñ',
    theme: '–¢–µ–º–∞',
    heroTitle: '–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –ø–∞–Ω–µ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞',
    heroText: '–®–≤–∏–¥–∫–∏–π –¥–æ—Å—Ç—É–ø –¥–æ –≥–∞–º–∞–Ω—Ü—è, –∑–∞–¥–∞—á —ñ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤. –°—Ç–≤–æ—Ä—é–π –ø—Ä–æ—î–∫—Ç–∏, –∑–Ω–∞—Ö–æ–¥—å –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤, —Ç—Ä–∏–º–∞–π —Ñ–æ–∫—É—Å.',
    createProjectBtn: 'Ôºã –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç', createTaskBtn: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É',
    freelSectionTitle: '–°–∏—Å—Ç–µ–º–∞ —Ñ—Ä—ñ–ª–∞–Ω—Å—É', allTasksTileTitle: '–í—Å—ñ –∑–∞–¥–∞—á—ñ', findWorkTileTitle: '–ü–æ—à—É–∫ —Ä–æ–±–æ—Ç–∏', createTaskTileTitle: '–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–¥–∞—á—É', disputesTileTitle: '–î–∏—Å–ø—É—Ç–∏',
    profiles_title: '–ü—Ä–æ—Ñ—ñ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤', backText: '–ù–∞–∑–∞–¥',
    workbench_title: '–í—Å—ñ –∑–∞–¥–∞—á—ñ', filtersTitle: '–§—ñ–ª—å—Ç—Ä–∏', escrowOnly: '–¢—ñ–ª—å–∫–∏ –µ—Å–∫—Ä–æ—É', urgentOnly: '–¢–µ—Ä–º—ñ–Ω–æ–≤—ñ', testOnly: '–ó —Ç–µ—Å—Ç-–∑–∞–≤–¥–∞–Ω–Ω—è–º', detailsTitle: '–î–µ—Ç–∞–ª—ñ –∑–∞–¥–∞—á—ñ', detailsEmpty: '–û–±–µ—Ä–∏ –∑–∞–¥–∞—á—É –∑—ñ —Å–ø–∏—Å–∫—É, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –æ–ø–∏—Å, –∫—Ä–∏—Ç–µ—Ä—ñ—ó –ø—Ä–∏–π–º–∞–Ω–Ω—è —Ç–∞ –¥—ñ—ó.',
    criteriaTitle:'–ö—Ä–∏—Ç–µ—Ä—ñ—ó –ø—Ä–∏–π–º–∞–Ω–Ω—è', action_apply:'–í—ñ–¥–≥—É–∫–Ω—É—Ç–∏—Å—å', action_question:'–ü–æ—Å—Ç–∞–≤–∏—Ç–∏ –ø–∏—Ç–∞–Ω–Ω—è', action_report:'–†–µ–ø–æ—Ä—Ç', ago:'—Ç–æ–º—É',
    // Escrow
    escrowTitle:'–ï—Å–∫—Ä–æ—É-–±–∞–ª–∞–Ω—Å', escrowHeld:'–£—Ç—Ä–∏–º—É—î—Ç—å—Å—è', escrowReleasable:'–î–æ—Å—Ç—É–ø–Ω–æ –¥–æ –≤–∏–ø–ª–∞—Ç–∏', escrowPending:'–û—á—ñ–∫—É—î –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è', requestPayout:'–ó–∞–ø–∏—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ', financeActionsTitle:'–§—ñ–Ω–∞–Ω—Å–∏', viewPayoutHistory:'–Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø–ª–∞—Ç',
    // Disputes/Admin
    disputesTitle:'–î–∏—Å–ø—É—Ç–∏', disputesFiltersTitle:'–§—ñ–ª—å—Ç—Ä–∏', dOpenText:'–í—ñ–¥–∫—Ä–∏—Ç—ñ', dReviewText:'–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ', dResolvedText:'–ó–∞–∫—Ä–∏—Ç—ñ', disputesEmpty:'–ù–µ–º–∞—î –∫–µ–π—Å—ñ–≤ –∑–∞ –æ–±—Ä–∞–Ω–∏–º–∏ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏.',
    openArb:'–í—ñ–¥–∫—Ä–∏—Ç–∏ –∞—Ä–±—ñ—Ç—Ä–∞–∂', addEvidence:'–î–æ–¥–∞—Ç–∏ –¥–æ–∫–∞–∑', closeCase:'–ó–∞–∫—Ä–∏—Ç–∏ –∫–µ–π—Å',
    adminTitle:'–ê–¥–º—ñ–Ω–∫–∞', admUsersLabel:'–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ', admJobsLabel:'–ó–∞–¥–∞—á—ñ –∞–∫—Ç–∏–≤–Ω—ñ', admDisputesLabel:'–î–∏—Å–ø—É—Ç–∏', admRevenueLabel:'–î–æ—Ö—ñ–¥ (30–¥)', admModerUsers:'–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤', admBlock:'–ë–ª–æ–∫—É–≤–∞—Ç–∏', admUnblock:'–†–æ–∑–±–ª–æ–∫—É–≤–∞—Ç–∏', admVerify:'–í–µ—Ä–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏', admModerJobs:'–ú–æ–¥–µ—Ä–∞—Ü—ñ—è –∑–∞–¥–∞—á', admApprove:'–°—Ö–≤–∞–ª–∏—Ç–∏', admReject:'–í—ñ–¥—Ö–∏–ª–∏—Ç–∏', admRepublish:'–ü–µ—Ä–µ–æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏',
    // Modal
    taskTitleLabel:'–ù–∞–∑–≤–∞ –∑–∞–¥–∞—á—ñ *', budgetLabel:'–ë—é–¥–∂–µ—Ç *', currencyLabel:'–í–∞–ª—é—Ç–∞', typeLabel:'–¢–∏–ø –æ–ø–ª–∞—Ç–∏', deadlineLabel:'–î–µ–¥–ª–∞–π–Ω *', langLabel:'–ú–æ–≤–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó', stackLabel:'–°—Ç–µ–∫ / —Ç–µ–≥–∏', descLabel:'–û–ø–∏—Å –∑–∞–¥–∞—á—ñ *', agreeLabel:'–ü–æ–≥–æ–¥–∂—É—é—Å—å –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ç–∞ –µ—Å–∫—Ä–æ—É', cancelBtn:'–°–∫–∞—Å—É–≤–∞—Ç–∏', publishBtn:'–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏',
    'err-title':'–ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤.', 'err-budget':'–í–∫–∞–∂–∏ —Å—É–º—É > 0.', 'err-deadline':'–û–±–µ—Ä–∏ –¥–∞—Ç—É —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É.', 'err-desc':'–ú—ñ–Ω—ñ–º—É–º 30 —Å–∏–º–≤–æ–ª—ñ–≤.', 'err-agree':'–ü–æ—Ç—Ä—ñ–±–Ω–∞ –∑–≥–æ–¥–∞.',
    toast_fill_required: '–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –æ–±–æ–≤\'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è', toast_task_published: '–ó–∞–¥–∞—á—É –æ–ø—É–±–ª—ñ–∫–æ–≤–∞–Ω–æ'
  },
  ru: {
    brandName: '–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞',
    tabDashboard: '–ü–∞–Ω–µ–ª—å', tabTasks: '–ó–∞–¥–∞—á–∏', tabProfiles: '–ü—Ä–æ—Ñ–∏–ª–∏',
    theme: '–¢–µ–º–∞',
    heroTitle: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
    heroText: '–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–æ—à–µ–ª—å–∫—É, –∑–∞–¥–∞—á–∞–º –∏ –ø—Ä–æ—Ñ–∏–ª—è–º. –°–æ–∑–¥–∞–≤–∞–π –ø—Ä–æ–µ–∫—Ç—ã, –Ω–∞—Ö–æ–¥–∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, –¥–µ—Ä–∂–∏ —Ñ–æ–∫—É—Å.',
    createProjectBtn: 'Ôºã –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç', createTaskBtn: '–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É',
    freelSectionTitle: '–°–∏—Å—Ç–µ–º–∞ —Ñ—Ä–∏–ª–∞–Ω—Å–∞', allTasksTileTitle: '–í—Å–µ –∑–∞–¥–∞—á–∏', findWorkTileTitle: '–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç—ã', createTaskTileTitle: '–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É', disputesTileTitle: '–î–∏—Å–ø—É—Ç—ã',
    profiles_title: '–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', backText: '–ù–∞–∑–∞–¥',
    workbench_title: '–í—Å–µ –∑–∞–¥–∞—á–∏', filtersTitle: '–§–∏–ª—å—Ç—Ä—ã', escrowOnly: '–¢–æ–ª—å–∫–æ —ç—Å–∫—Ä–æ—É', urgentOnly: '–°—Ä–æ—á–Ω—ã–µ', testOnly: '–° —Ç–µ—Å—Ç-–∑–∞–¥–∞–Ω–∏–µ–º', detailsTitle: '–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏', detailsEmpty: '–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É –∏–∑ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ, –∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è.',
    criteriaTitle:'–ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏', action_apply:'–û—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è', action_question:'–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å', action_report:'–†–µ–ø–æ—Ä—Ç', ago:'–Ω–∞–∑–∞–¥',
    escrowTitle:'–ë–∞–ª–∞–Ω—Å —ç—Å–∫—Ä–æ—É', escrowHeld:'–£–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è', escrowReleasable:'–î–æ—Å—Ç—É–ø–Ω–æ –∫ –≤—ã–ø–ª–∞—Ç–µ', escrowPending:'–û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', requestPayout:'–ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω', financeActionsTitle:'–§–∏–Ω–∞–Ω—Å—ã', viewPayoutHistory:'–ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–ª–∞—Ç',
    disputesTitle:'–î–∏—Å–ø—É—Ç—ã', disputesFiltersTitle:'–§–∏–ª—å—Ç—Ä—ã', dOpenText:'–û—Ç–∫—Ä—ã—Ç—ã–µ', dReviewText:'–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏', dResolvedText:'–ó–∞–∫—Ä—ã—Ç—ã–µ', disputesEmpty:'–ù–µ—Ç –∫–µ–π—Å–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º.',
    openArb:'–û—Ç–∫—Ä—ã—Ç—å –∞—Ä–±–∏—Ç—Ä–∞–∂', addEvidence:'–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ', closeCase:'–ó–∞–∫—Ä—ã—Ç—å –∫–µ–π—Å',
    adminTitle:'–ê–¥–º–∏–Ω–∫–∞', admUsersLabel:'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', admJobsLabel:'–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏', admDisputesLabel:'–î–∏—Å–ø—É—Ç—ã', admRevenueLabel:'–î–æ—Ö–æ–¥ (30–¥)', admModerUsers:'–ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π', admBlock:'–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å', admUnblock:'–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å', admVerify:'–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å', admModerJobs:'–ú–æ–¥–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á', admApprove:'–û–¥–æ–±—Ä–∏—Ç—å', admReject:'–û—Ç–∫–ª–æ–Ω–∏—Ç—å', admRepublish:'–ü–µ—Ä–µ–æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å',
    taskTitleLabel:'–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *', budgetLabel:'–ë—é–¥–∂–µ—Ç *', currencyLabel:'–í–∞–ª—é—Ç–∞', typeLabel:'–¢–∏–ø –æ–ø–ª–∞—Ç—ã', deadlineLabel:'–î–µ–¥–ª–∞–π–Ω *', langLabel:'–Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è', stackLabel:'–°—Ç–µ–∫ / —Ç–µ–≥–∏', descLabel:'–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *', agreeLabel:'–°–æ–≥–ª–∞—Å–µ–Ω —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ —ç—Å–∫—Ä–æ—É', cancelBtn:'–û—Ç–º–µ–Ω–∞', publishBtn:'–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å',
    'err-title':'–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤.', 'err-budget':'–£–∫–∞–∂–∏ —Å—É–º–º—É > 0.', 'err-deadline':'–í—ã–±–µ—Ä–∏ –¥–∞—Ç—É –≤ –±—É–¥—É—â–µ–º.', 'err-desc':'–ú–∏–Ω–∏–º—É–º 30 —Å–∏–º–≤–æ–ª–æ–≤.', 'err-agree':'–ù—É–∂–Ω–æ —Å–æ–≥–ª–∞—Å–∏–µ.',
    toast_fill_required: '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è', toast_task_published: '–ó–∞–¥–∞—á–∞ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–∞'
  },
  en: {
    brandName: 'Project Name',
    tabDashboard: 'Dashboard', tabTasks: 'Jobs', tabProfiles: 'Profiles',
    theme: 'Theme',
    heroTitle: 'Welcome to your dashboard',
    heroText: 'Quick access to wallet, jobs and profiles. Create projects, find talent, stay focused.',
    createProjectBtn: '+ Create project', createTaskBtn: 'Create job',
    freelSectionTitle: 'Freelance system', allTasksTileTitle: 'All jobs', findWorkTileTitle: 'Find work', createTaskTileTitle: 'Create job', disputesTileTitle: 'Disputes',
    profiles_title: 'User profiles', backText: 'Back',
    workbench_title: 'All jobs', filtersTitle: 'Filters', escrowOnly: 'Escrow only', urgentOnly: 'Urgent', testOnly: 'With test task', detailsTitle: 'Job details', detailsEmpty: 'Select a job to see description, acceptance criteria and actions.',
    criteriaTitle:'Acceptance criteria', action_apply:'Apply', action_question:'Ask question', action_report:'Report', ago:'ago',
    escrowTitle:'Escrow balance', escrowHeld:'Held', escrowReleasable:'Releasable', escrowPending:'Pending', requestPayout:'Payout requested', financeActionsTitle:'Finance', viewPayoutHistory:'Payout history',
    disputesTitle:'Disputes', disputesFiltersTitle:'Filters', dOpenText:'Open', dReviewText:'In review', dResolvedText:'Resolved', disputesEmpty:'No cases for selected filters.',
    openArb:'Open arbitration', addEvidence:'Add evidence', closeCase:'Close case',
    adminTitle:'Admin', admUsersLabel:'Users', admJobsLabel:'Active jobs', admDisputesLabel:'Disputes', admRevenueLabel:'Revenue (30d)', admModerUsers:'User moderation', admBlock:'Block', admUnblock:'Unblock', admVerify:'Verify', admModerJobs:'Job moderation', admApprove:'Approve', admReject:'Reject', admRepublish:'Republish',
    taskTitleLabel:'Job title *', budgetLabel:'Budget *', currencyLabel:'Currency', typeLabel:'Payment type', deadlineLabel:'Deadline *', langLabel:'Communication language', stackLabel:'Stack / tags', descLabel:'Job description *', agreeLabel:'I agree to platform & escrow terms', cancelBtn:'Cancel', publishBtn:'Publish',
    'err-title':'Min 6 characters.', 'err-budget':'Enter amount > 0.', 'err-deadline':'Choose a future date.', 'err-desc':'Min 30 characters.', 'err-agree':'Consent required.',
    toast_fill_required: 'Fill required fields', toast_task_published: 'Job published'
  }
};
let lang = localStorage.getItem('fx-lang') || 'uk';
function i18n(key){ return (translations[lang] && translations[lang][key]) || translations.uk[key] || key; }
function applyI18n(){
  const ids = ['brandName','tabDashboard','tabTasks','tabProfiles','heroTitle','heroText','createProjectBtn','createTaskBtn','freelSectionTitle','allTasksTileTitle','findWorkTileTitle','createTaskTileTitle','disputesTileTitle'];
  ids.forEach(id=>{ const el = document.getElementById(id); if(el) el.textContent = i18n(id); });
  const map = {
    'profiles-title':'profiles_title','backText':'backText','workbench-title':'workbench_title','filtersTitle':'filtersTitle','escrowOnly':'escrowOnly','urgentOnly':'urgentOnly','testOnly':'testOnly','detailsTitle':'detailsTitle','detailsEmpty':'detailsEmpty',
    'disputes-title':'disputesTitle','disputesFiltersTitle':'disputesFiltersTitle','dOpenText':'dOpenText','dReviewText':'dReviewText','dResolvedText':'dResolvedText','disputesEmpty':'disputesEmpty',
    'admin-title':'adminTitle','admUsersLabel':'admUsersLabel','admJobsLabel':'admJobsLabel','admDisputesLabel':'admDisputesLabel','admRevenueLabel':'admRevenueLabel','admModerUsers':'admModerUsers','admBlock':'admBlock','admUnblock':'admUnblock','admVerify':'admVerify','admModerJobs':'admModerJobs','admApprove':'admApprove','admReject':'admReject','admRepublish':'admRepublish',
    'taskTitleLabel':'taskTitleLabel','budgetLabel':'budgetLabel','currencyLabel':'currencyLabel','typeLabel':'typeLabel','deadlineLabel':'deadlineLabel','langLabel':'langLabel','stackLabel':'stackLabel','descLabel':'descLabel','agreeLabel':'agreeLabel','cancelBtn':'cancelBtn','publishBtn':'publishBtn',
    'escrowTitle':'escrowTitle','escrowHeld':'escrowHeld','escrowReleasable':'escrowReleasable','escrowPending':'escrowPending','financeActionsTitle':'financeActionsTitle','viewPayoutHistoryBtn':'viewPayoutHistory','requestPayoutBtn':'requestPayout'
  };
  Object.entries(map).forEach(([id,key])=>{ const el=document.getElementById(id); if(el) el.textContent=i18n(key); });
  // Language chips active state
  ['lngUA','lngRU','lngEN'].forEach(cid => { const el = document.getElementById(cid); if(el) el.classList.remove('active'); });
  if(lang==='uk') $('#lngUA').classList.add('active');
  if(lang==='ru') $('#lngRU').classList.add('active');
  if(lang==='en') $('#lngEN').classList.add('active');
  // Tabs
  $('#tabDashboard').textContent = i18n('tabDashboard');
  $('#tabTasks').textContent = i18n('tabTasks');
  $('#tabProfiles').textContent = i18n('tabProfiles');
  const ta = $('#tabAdmin'); if(ta) ta.textContent = i18n('adminTitle');
}
$('#lngUA').onclick = ()=>{ lang='uk'; localStorage.setItem('fx-lang','uk'); applyI18n(); rerender(); };
$('#lngRU').onclick = ()=>{ lang='ru'; localStorage.setItem('fx-lang','ru'); applyI18n(); rerender(); };
$('#lngEN').onclick = ()=>{ lang='en'; localStorage.setItem('fx-lang','en'); applyI18n(); rerender(); };
function rerender(){ if(pages.workbench && !pages.workbench.classList.contains('hidden')) renderJobs(); if(pages.disputes && !pages.disputes.classList.contains('hidden')) renderDisputes(); }

// ===== Create Task Modal =====
const taskModal = () => document.getElementById('taskModal');
function openTaskModal(){ taskModal().classList.remove('hidden'); setTimeout(()=> $('#taskTitle') && $('#taskTitle').focus(), 60); }
function closeTaskModal(){ taskModal().classList.add('hidden'); }

document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && taskModal() && !taskModal().classList.contains('hidden')) closeTaskModal(); });
function setError(el, show, id){ const msg = document.getElementById(id); if(!el||!msg) return; if(show){ el.classList.add('invalid'); msg.style.display='block'; } else { el.classList.remove('invalid'); msg.style.display='none'; } }
function submitTask(){
  const title = $('#taskTitle');
  const budget = $('#budget');
  const deadline = $('#deadline');
  const desc = $('#desc');
  const agree = $('#agree');
  const today = new Date(); today.setHours(0,0,0,0);
  const dVal = deadline && deadline.value ? new Date(deadline.value) : null;
  const okTitle = title && title.value.trim().length >= 6;
  const okBudget = budget && parseFloat(budget.value) > 0;
  const okDeadline = dVal && dVal.getTime() > today.getTime();
  const okDesc = desc && desc.value.trim().length >= 30;
  const okAgree = agree && agree.checked;
  setError(title, !okTitle, 'err-title');
  setError(budget, !okBudget, 'err-budget');
  setError(deadline, !okDeadline, 'err-deadline');
  setError(desc, !okDesc, 'err-desc');
  const agreeErr = $('#err-agree'); if(agreeErr) agreeErr.style.display = okAgree ? 'none':'block';
  if(!(okTitle && okBudget && okDeadline && okDesc && okAgree)) { toast(i18n('toast_fill_required')); return; }
  closeTaskModal();
  const id = Math.floor(100000 + Math.random()*900000);
  toast(i18n('toast_task_published') + ` (#${id})`);
  const form = $('#taskForm'); if(form) form.reset();
}

// ===== Workbench Jobs =====
const jobsData = [
  {id:101, title:'–õ–µ–Ω–¥—ñ–Ω–≥ –¥–ª—è –∫–∞–≤ º—è—Ä–Ω—ñ', budget:700, cur:'USD', deadlineDays:7, tags:['design','react'], type:'fixed', escrow:true, urgent:false, test:false, posted:'3h', desc:'–ü–æ—Ç—Ä—ñ–±–µ–Ω –ª–µ–Ω–¥—ñ–Ω–≥ –∑ –æ–ø–ª–∞—Ç–æ—é, –∞–¥–∞–ø—Ç–∏–≤, 5 —Å–µ–∫—Ü—ñ–π, UI-–∫–∏—Ç –≤ Figma.', criteria:['Pixel-perfect','Core Web Vitals green','–û–ø–ª–∞—Ç–∞ Stripe']},
  {id:102, title:'–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –∑–∞—è–≤–æ–∫', budget:500, cur:'USD', deadlineDays:5, tags:['python','telegram'], type:'fixed', escrow:true, urgent:true, test:true, posted:'1h', desc:'–ë–æ—Ç –ø—Ä–∏–π–º–∞—î –∑–∞—è–≤–∫–∏, –∞–¥–º—ñ–Ω–∫–∞, –µ–∫—Å–ø–æ—Ä—Ç —É Google Sheets.', criteria:['–ê–Ω—Ç–∏—Å–ø–∞–º','–ê–¥–º—ñ–Ω-—Ä–æ–ª—ñ','–õ–æ–≥–∏ –ø–æ–¥—ñ–π']},
  {id:103, title:'Dashboard React + Node', budget:20, cur:'USD/h', deadlineDays:14, tags:['react','node'], type:'hourly', escrow:false, urgent:false, test:true, posted:'12h', desc:'–í–Ω—É—Ç—Ä—ñ—à–Ω—è –∞–¥–º—ñ–Ω–∫–∞: —Ç–∞–±–ª–∏—Ü—ñ, —Ñ—ñ–ª—å—Ç—Ä–∏, –≥—Ä–∞—Ñ—ñ–∫–∏.', criteria:['JWT','Audit log','Unit tests 60%']},
  {id:104, title:'–†–µ–¥–∏–∑–∞–π–Ω —Å–∞–π—Ç—É –∞–≥–µ–Ω—Ü—ñ—ó', budget:1200, cur:'USD', deadlineDays:10, tags:['design'], type:'fixed', escrow:true, urgent:true, test:false, posted:'30m', desc:'–†–µ–¥–∏–∑–∞–π–Ω –≥–æ–ª–æ–≤–Ω–æ—ó, –±–ª–æ“ë—É –π –ø–æ—Ä—Ç—Ñ–æ–ª—ñ–æ. Dark/light.', criteria:['Design tokens','Accessibility AA','Anim 150ms']}
];
function renderJobs(){
  const list = $('#jobsList'); if(!list) return; list.innerHTML='';
  const tagActive = $$('#stackChips .skill-chip.active').map(el=>el.dataset.tag);
  const fEscrow = $('#fltEscrow')?.checked; const fUrgent = $('#fltUrgent')?.checked; const fTest = $('#fltTest')?.checked;
  const filtered = jobsData.filter(j => (tagActive.length? tagActive.some(t=>j.tags.includes(t)) : true) && (!fEscrow || j.escrow) && (!fUrgent || j.urgent) && (!fTest || j.test));
  filtered.forEach(j=>{
    const el = document.createElement('article'); el.className='job'; el.dataset.id=j.id;
    el.innerHTML = `<div class="row" style="justify-content:space-between"><strong>${j.title}</strong><span>${j.budget} ${j.cur}</span></div>
      <div class="meta"> <span>‚è± ${j.deadlineDays}d</span> <span>‚Ä¢</span> <span>üìå ${j.posted} ${i18n('ago')}</span></div>
      <div style="margin-top:8px; display:flex; gap:6px; flex-wrap:wrap;">${j.tags.map(t=>`<span class='tag'>${t}</span>`).join('')}</div>`;
    el.onclick = ()=> selectJob(j.id);
    list.appendChild(el);
  });
  if(filtered.length) selectJob(filtered[0].id); else clearDetails();
}
function clearDetails(){ $('#detailsBody').classList.add('hidden'); $('#detailsEmpty').classList.remove('hidden'); $$('.job').forEach(j=>j.classList.remove('selected')); }
function selectJob(id){
  const j = jobsData.find(x=>x.id===id); if(!j) return;
  $$('.job').forEach(el=> el.classList.toggle('selected', Number(el.dataset.id)===id));
  const box = $('#detailsBody');
  box.innerHTML = `<p>${j.desc}</p>
    <h4>${i18n('criteriaTitle')}</h4>
    <ul>${j.criteria.map(c=>`<li>${c}</li>`).join('')}</ul>
    <div class='actions'>
      <button class='btn-solid' onclick="toast('${i18n('action_apply')} (–¥–µ–º–æ)')">${i18n('action_apply')}</button>
      <button class='tab-btn ghost' onclick="toast('${i18n('action_question')} (–¥–µ–º–æ)')">${i18n('action_question')}</button>
      <button class='tab-btn ghost' onclick="toast('${i18n('action_report')} (–¥–µ–º–æ)')">${i18n('action_report')}</button>
    </div>`;
  $('#detailsEmpty').classList.add('hidden'); box.classList.remove('hidden');
}
// Filters interactions
$$('#stackChips .skill-chip').forEach(ch=> ch.onclick = ()=>{ ch.classList.toggle('active'); renderJobs(); });
;['fltEscrow','fltUrgent','fltTest'].forEach(id=>{ const el=$('#'+id); if(el) el.onchange = renderJobs; });

// ===== Disputes =====
const disputesData = [
  {id:'D-201', job:'#101', status:'open', updated:'2h', title:'–ù–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –¢–ó', desc:'–ó–∞–º–æ–≤–Ω–∏–∫ –≤–≤–∞–∂–∞—î, —â–æ –º–∞–∫–µ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞–º.'},
  {id:'D-202', job:'#099', status:'review', updated:'1d', title:'–ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π –¥–µ–¥–ª–∞–π–Ω', desc:'–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å –ø—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É –Ω–∞ 3 –¥–Ω—ñ.'},
  {id:'D-203', job:'#087', status:'resolved', updated:'4d', title:'–°–ø—ñ—Ä —â–æ–¥–æ –≤–∏–ø–ª–∞—Ç–∏', desc:'–ï—Å–∫—Ä–æ—É —Ä–æ–∑–±–ª–æ–∫–æ–≤–∞–Ω–æ –ø—ñ—Å–ª—è –ø—Ä–∞–≤–æ–∫, –∫–µ–π—Å –∑–∞–∫—Ä–∏—Ç–æ.'}
];
function statusLabel(s){ if(lang==='ru') return s==='open'?'–û—Ç–∫—Ä—ã—Ç':s==='review'?'–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏':'–ó–∞–∫—Ä—ã—Ç'; if(lang==='en') return s==='open'?'Open':s==='review'?'In review':'Resolved'; return s==='open'?'–í—ñ–¥–∫—Ä–∏—Ç–∏–π':s==='review'?'–ù–∞ —Ä–æ–∑–≥–ª—è–¥—ñ':'–ó–∞–∫—Ä–∏—Ç–∏–π'; }
function renderDisputes(){
  const list = $('#disputesList'); const empty = $('#disputesEmpty'); if(!list||!empty) return;
  const fOpen = $('#dOpen')?.checked, fReview = $('#dReview')?.checked, fResolved = $('#dResolved')?.checked;
  const filtered = disputesData.filter(d => (d.status==='open' && fOpen) || (d.status==='review' && fReview) || (d.status==='resolved' && fResolved));
  list.innerHTML='';
  filtered.forEach(d=>{
    const el = document.createElement('article'); el.className='job';
    el.innerHTML = `<div class='row' style='justify-content:space-between'><strong>${d.title}</strong><span>${d.job}</span></div>
                    <div class='meta'><span>‚è± ${d.updated} ${i18n('ago')}</span> <span>‚Ä¢</span> <span>${statusLabel(d.status)}</span></div>
                    <p style='margin:8px 0 0'>${d.desc}</p>
                    <div class='actions' style='margin-top:8px'>
                      <button class='btn-solid' onclick="toast('${i18n('openArb')} (–¥–µ–º–æ)')">${i18n('openArb')}</button>
                      <button class='tab-btn ghost' onclick="toast('${i18n('addEvidence')} (–¥–µ–º–æ)')">${i18n('addEvidence')}</button>
                      <button class='tab-btn ghost' onclick="toast('${i18n('closeCase')} (–¥–µ–º–æ)')">${i18n('closeCase')}</button>
                    </div>`;
    list.appendChild(el);
  });
  empty.style.display = filtered.length ? 'none' : 'block';
}
;['dOpen','dReview','dResolved'].forEach(id=>{ const el=$('#'+id); if(el) el.onchange = renderDisputes; });

// ===== Init =====
restoreTheme();
applyI18n();
show('dashboard', true);
</script>
</body>
</html>
